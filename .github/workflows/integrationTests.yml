name: Integration Tests

on:
  schedule:
  - cron: 0 2 * * 1-5
  workflow_dispatch:

jobs:
  test-Latest:
    runs-on: macos-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v2
    - name: Unit tests
      run: make tests
    - name: Test macOS
      run: make test-macOS
    - name: Test iOS
      run: make test-iOS
    - name: Test tvOS
      run: make test-tvOS
  test-10_13:
    runs-on: macos-10.13
    steps:
    - name: Checkout
      uses: actions/checkout@v2
    - name: Unit tests
      run: make tests
    - name: Test macOS
      run: make test-macOS
    - name: Test iOS
      run: make test-iOS
    - name: Test tvOS
      run: make test-tvOS
  test-10_14:
    runs-on: macos-10.14
    steps:
    - name: Checkout
      uses: actions/checkout@v2
    - name: Unit tests
      run: make tests
    - name: Test macOS
      run: make test-macOS
    - name: Test iOS
      run: make test-iOS
    - name: Test tvOS
      run: make test-tvOS
  test-10_15:
    runs-on: macos-10.15
    steps:
    - name: Checkout
      uses: actions/checkout@v2
    - name: Unit tests
      run: make tests
    - name: Test macOS
      run: make test-macOS
    - name: Test iOS
      run: make test-iOS
    - name: Test tvOS
      run: make test-tvOS
  test-11_0:
    runs-on: macos-11.0
    steps:
    - name: Checkout
      uses: actions/checkout@v2
    - name: Unit tests
      run: make tests
    - name: Test macOS
      run: make test-macOS
    - name: Test iOS
      run: make test-iOS
    - name: Test tvOS
      run: make test-tvOS
